CFLAGS = -static
LFLAGS = -lpthread

SRCS := $(filter-out hashbrown_distributed.c, $(wildcard *.c))
PROGS := $(patsubst %.c,%,$(SRCS))

all: $(PROGS)

%: %.c
	gcc $(CFLAGS) -o $@ $< $(LFLAGS) 
	cp $@ initramfs

.PHONY:
	clean

clean:
	rm $(PROGS)
	rm -rf initramfs
	rm -rf initramfs.cpio

